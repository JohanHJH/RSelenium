<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Docker • RSelenium</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Docker">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RSelenium</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.7.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basics.html">Basics</a>
    </li>
    <li>
      <a href="../articles/docker.html">Docker</a>
    </li>
    <li>
      <a href="../articles/headless.html">Headless Browsing</a>
    </li>
    <li>
      <a href="../articles/saucelabs.html">Driving OS/Browsers Local and Remote</a>
    </li>
    <li>
      <a href="../articles/shinytesting.html">Testing Shiny Apps</a>
    </li>
    <li>
      <a href="../articles/webinar.html">OCRUG Webinar</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Docker</h1>
            
      
      
      <div class="hidden name"><code>docker.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The goal of this document to illustrate the use of docker and the Selenium project. The selenium project has released a number of containers to run various tools in the suite.</p>
<div id="why-docker" class="section level3">
<h3 class="hasAnchor">
<a href="#why-docker" class="anchor"></a>Why Docker?</h3>
<p>Running a docker container standardises the build across OS’s and removes many of the issues user may have relating to JAVA/browser version/selenium version etc.</p>
</div>
</div>
<div id="preparing-docker-on-windows" class="section level2">
<h2 class="hasAnchor">
<a href="#preparing-docker-on-windows" class="anchor"></a>Preparing Docker on Windows</h2>
<p>The following outlines preparing a windows 10 home installation to run docker containers.</p>
<div id="installing-docker" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-docker" class="anchor"></a>Installing Docker</h3>
<p>Depending on your version of windows there are currently two ways of running docker. Details are given at <a href="https://docs.docker.com/engine/installation/windows/">Docker</a>. For the version of windows Being used in this vignette (win 10 home) the older <a href="https://www.docker.com/products/docker-toolbox">Docker toolbox</a> is what we are going to use to run containers.</p>
<p>Download the <code>.exe</code> for Docker toolbox and begin the install. Follow the instructions on the <a href="https://docs.docker.com/toolbox/toolbox_install_windows/">toolbox install windows</a> page.</p>
<p>Clicking on the Docker Quickstart terminal link should eventually give you a terminal that resembles the following:</p>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203296/windowsToolbox.png" title="Docker toolbox on Win 10 Home" width="100%"></p>
</div>
</div>
<div id="preparing-docker-on-linux" class="section level2">
<h2 class="hasAnchor">
<a href="#preparing-docker-on-linux" class="anchor"></a>Preparing Docker on Linux</h2>
<p>The following outlines preparing a ubuntu 16.04 installation to run docker containers.</p>
<div id="installing-docker-1" class="section level3">
<h3 class="hasAnchor">
<a href="#installing-docker-1" class="anchor"></a>Installing Docker</h3>
<p>For a general guide for various Linux distros see <a href="https://docs.docker.com/engine/installation/linux/">Docker</a></p>
<div id="ubuntu-16-04" class="section level4">
<h4 class="hasAnchor">
<a href="#ubuntu-16-04" class="anchor"></a>Ubuntu 16.04</h4>
<p>Run system update firstly</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get update</code></pre></div>
<p>Add the official Docker GPG key to your system</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> apt-key adv --keyserver hkp://p80.pool.sks-keyservers.net:80 --recv-keys 58118E89F3A912897C070ADBF76221572C52609D</code></pre></div>
<p>Add the Docker repository to APT sources:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="bu">echo</span> <span class="st">"deb https://apt.dockerproject.org/repo ubuntu-xenial main"</span> <span class="kw">|</span> <span class="fu">sudo</span> tee /etc/apt/sources.list.d/docker.list</code></pre></div>
<p>Update the package database:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get update</code></pre></div>
<p>Now you should be able to install Docker</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get install -y docker-engine</code></pre></div>
<p>Start the docker daemon.</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> service docker start</code></pre></div>
<p>You can check that the Docker is working by running a test container:</p>
<p>For now run as <code>sudo</code></p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker run hello-world</code></pre></div>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/ubuntuHelloWorld.png" title="Docker hello-world Ubuntu 16.04" width="100%"></p>
</div>
<div id="running-without-sudo" class="section level4">
<h4 class="hasAnchor">
<a href="#running-without-sudo" class="anchor"></a>Running without sudo</h4>
<p>If you want to run <code>docker</code> without <code>sudo</code> you can create a docker group and add the appropriate user to that group see <a href="https://docs.docker.com/engine/installation/linux/ubuntulinux/#create-a-docker-group">Docker</a>.</p>
</div>
</div>
</div>
<div id="using-selenium-docker-images" class="section level2">
<h2 class="hasAnchor">
<a href="#using-selenium-docker-images" class="anchor"></a>Using Selenium Docker Images</h2>
<p>The official docker repository can be viewed <a href="https://hub.docker.com/u/selenium/">here</a> at Docker Hub.</p>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/SeleniumDockerHub.png" title="Official Selenium repository at Docker Hub" width="100%"></p>
<div id="whats-in-an-image" class="section level3">
<h3 class="hasAnchor">
<a href="#whats-in-an-image" class="anchor"></a>What’s in an Image?</h3>
<p>Lets examine the <a href="https://hub.docker.com/r/selenium/node-firefox/"><code>selenium/node-firefox</code></a> image. The first thing to note is the <code>Tags</code>.</p>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/node-firefox.png" title="Selenium node-firefox image tags" width="100%"></p>
<p>Clicking this gives us the various tagged versions of this image. Clicking Dockerfile allows us to view the source behind the image:</p>
<pre><code>FROM selenium/node-base:2.53.0 
MAINTAINER Selenium &lt;selenium-developers@googlegroups.com&gt; 

USER root #========= 
# Firefox 
#========= 
ENV FIREFOX_VERSION 45.0.2 </code></pre>
<p>We can see that this image will run selenium server and contain firefox version 45.0.2.</p>
<p>We will be interested not in the node-firefox image but the <a href="https://hub.docker.com/r/selenium/standalone-firefox/">selenium/standalone-firefox</a> image. Looking at its Dockerfile we see however that it is built on the first image we looked at.</p>
</div>
<div id="pulling-an-image" class="section level3">
<h3 class="hasAnchor">
<a href="#pulling-an-image" class="anchor"></a>Pulling an Image</h3>
<div id="windows-10---docker-toolbox" class="section level4">
<h4 class="hasAnchor">
<a href="#windows-10---docker-toolbox" class="anchor"></a>Windows 10 - Docker Toolbox</h4>
<p>To get the image we are interested in we first click our quickstart link to open a terminal.</p>
<p>We then issue the following command:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> pull selenium/standalone-firefox:2.53.0</code></pre></div>
<p>Notice we appended a tag version so we are asking for the <code>2.53.0</code> version of this image.</p>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203296/Win10PullFirefox.png" title="Official Selenium repository at Docker Hub" width="100%"></p>
</div>
<div id="ubuntu-16-04-1" class="section level4">
<h4 class="hasAnchor">
<a href="#ubuntu-16-04-1" class="anchor"></a>Ubuntu 16.04</h4>
<p>Similar to windows we use the <code>docker pull</code> command. If you did not create and add your user to a <code>Docker</code> group you will need to <code>sudo</code></p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker pull selenium/standalone-firefox:2.53.0</code></pre></div>
</div>
</div>
<div id="start-your-servers" class="section level3">
<h3 class="hasAnchor">
<a href="#start-your-servers" class="anchor"></a>Start Your Servers!</h3>
<p>When we run an image we refer to that instance of the running image as a container. Importantly for Selenium we are dealing with a server so we require a port. We will have a port on the container and a port on the host machine (the machine that is running the container). The only complexity will involve mapping the host port and container port.</p>
<p>By default the Selenium images expose port 4444 and use this port for serving. This is not a problem for us and we can map as we see fit on the host machine.</p>
<div id="windows-10-running-an-image" class="section level4">
<h4 class="hasAnchor">
<a href="#windows-10-running-an-image" class="anchor"></a>Windows 10 Running an Image</h4>
<p>Again we run docker and this time use the <a href="https://docs.docker.com/engine/reference/commandline/run/"><code>run</code></a> command.</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> run -d -p 4445:4444 selenium/standalone-firefox:2.53.0</code></pre></div>
<p>For illustration here we are mapping the container port 4444 to the host port 4445 so when we want to refer to our server on the host machine we will use 4445 as the port.</p>
<p>We also run the <a href="https://docs.docker.com/engine/reference/commandline/ps/"><code>ps</code></a> command after running to show our current running containers.</p>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/SeleniumRunWin10.png" title="Running standalone-firefox:2.53.0 Win 10" width="100%"></p>
<p>So we can see an instance of standalone-firefox:2.53.0 is running. It has <code>id=ac61567a8f06</code> and is named <code>peaceful_aryabhata</code>.</p>
</div>
<div id="ubuntu-16-04-running-an-image" class="section level4">
<h4 class="hasAnchor">
<a href="#ubuntu-16-04-running-an-image" class="anchor"></a>Ubuntu 16.04 Running an Image</h4>
<p>For ubuntu we also issue a <code>run</code> command followed by a listing of running containers with <code>ps</code>.</p>
<p>Again run as <code>sudo</code> if necessary:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker run -d -p 4445:4444 selenium/standalone-firefox:2.53.0
<span class="fu">sudo</span> docker ps</code></pre></div>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203293/SeleniumRunUbuntu.png" title="Running standalone-firefox:2.53.0 Win 10" width="100%"></p>
<p>The <code>Ubuntu</code> container has <code>id=5475923fc4dc</code> and is named <code>peaceful_payne</code>.</p>
<p>A tip if you dont want to strain your eyes is to use the <code>--format</code> argument:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker ps --format <span class="st">'table {{.Names}}\t{{.Image}}\t{{.ID}}'</span></code></pre></div>
<pre><code>NAMES               IMAGE                                CONTAINER ID
peaceful_payne      selenium/standalone-firefox:2.53.0   5475923fc4dc</code></pre>
</div>
</div>
<div id="rselenium-and-running-containers" class="section level3">
<h3 class="hasAnchor">
<a href="#rselenium-and-running-containers" class="anchor"></a>RSelenium and Running Containers</h3>
<p>Now that we have a container running a selenium server and its own firefox we can call it using <code>RSelenium</code></p>
<div id="utilising-the-firefox-standalone-container-in-windows-10" class="section level4">
<h4 class="hasAnchor">
<a href="#utilising-the-firefox-standalone-container-in-windows-10" class="anchor"></a>Utilising the Firefox Standalone Container in Windows 10</h4>
<p>With Windows 10 we have Docker toolbox which creates a virtual machine on windows to run our containers. So the virtual machine is the host rather than Win 10. We need the ip address of this virtual machine. This is the only added complication. We can get the ip address of the virtual machine using <code>docker-machine.exe</code>:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker-machine</span> ip</code></pre></div>
<pre><code>192.168.99.100</code></pre>
<p>So as we can see the virtual machine has <code>ip = 192.168.99.100</code> and as we noted previously we mapped port 4444 to port 4445 on the host (the virtual machine in this case). So we should have a Selenium server accesible on port 4445 of the virtual machine. Lets try it:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RSelenium)
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(
  <span class="dt">remoteServerAddr =</span> <span class="st">"192.168.99.100"</span>,
  <span class="dt">port =</span> 4445L
)
remDr<span class="op">$</span><span class="kw">open</span>()</code></pre></div>
<pre><code>## [1] "Connecting to remote server"
## $applicationCacheEnabled
## [1] TRUE
## 
## $rotatable
## [1] FALSE
## 
## $handlesAlerts
## [1] TRUE
## 
## $databaseEnabled
## [1] TRUE
## 
## $version
## [1] "45.0.2"
## 
## $platform
## [1] "LINUX"
## 
## $nativeEvents
## [1] FALSE
## 
## $acceptSslCerts
## [1] TRUE
## 
## $webdriver.remote.sessionid
## [1] "bfe1c24d-8b17-4e64-a062-cba14e99472b"
## 
## $webStorageEnabled
## [1] TRUE
## 
## $locationContextEnabled
## [1] TRUE
## 
## $browserName
## [1] "firefox"
## 
## $takesScreenshot
## [1] TRUE
## 
## $javascriptEnabled
## [1] TRUE
## 
## $cssSelectorsEnabled
## [1] TRUE
## 
## $id
## [1] "bfe1c24d-8b17-4e64-a062-cba14e99472b"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.google.com/ncr"</span>)
remDr<span class="op">$</span><span class="kw">getTitle</span>()</code></pre></div>
<pre><code>## [[1]]
## [1] "Google"</code></pre>
<p>So as expected we have version <code>45.0.2</code> of firefox running in <code>Linux</code>. We note that no browser popped up and we dont see any signs in the <code>MINGW64</code> console. This is expected the browser is headless. If you are using <code>RStudio</code> you can use the <code>Viewer</code> pane to get a screenshot <code>remDr$screenshot(display = TRUE)</code>. Later we will see how we can run a debug version that uses <code>VNC</code> to allow us to interact with the containers browser.</p>
</div>
<div id="utilising-the-firefox-standalone-container-in-ubuntu-16-04" class="section level4">
<h4 class="hasAnchor">
<a href="#utilising-the-firefox-standalone-container-in-ubuntu-16-04" class="anchor"></a>Utilising the Firefox Standalone Container in Ubuntu 16.04</h4>
<p>On our ubuntu 16.04 box life is simpler. The host in this case is the machine itself. The ip address is therefore <code>localhost</code> the default for <code>RSelenium</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RSelenium)
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">port =</span> 4445L)
remDr<span class="op">$</span><span class="kw">open</span>()</code></pre></div>
<pre><code>## [1] "Connecting to remote server"
## $applicationCacheEnabled
## [1] TRUE
## 
## $rotatable
## [1] FALSE
## 
## $handlesAlerts
## [1] TRUE
## 
## $databaseEnabled
## [1] TRUE
## 
## $version
## [1] "45.0.2"
## 
## $platform
## [1] "LINUX"
## 
## $nativeEvents
## [1] FALSE
## 
## $acceptSslCerts
## [1] TRUE
## 
## $webdriver.remote.sessionid
## [1] "644c353a-34b8-4bb4-bcff-746df5a30af8"
## 
## $webStorageEnabled
## [1] TRUE
## 
## $locationContextEnabled
## [1] TRUE
## 
## $browserName
## [1] "firefox"
## 
## $takesScreenshot
## [1] TRUE
## 
## $javascriptEnabled
## [1] TRUE
## 
## $cssSelectorsEnabled
## [1] TRUE
## 
## $id
## [1] "644c353a-34b8-4bb4-bcff-746df5a30af8"</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.google.com/ncr"</span>)
remDr<span class="op">$</span><span class="kw">getTitle</span>()</code></pre></div>
<pre><code>## [[1]]
## [1] "Google"
</code></pre>
<p>Again we see that we have <code>Firefox</code> 45.0.2 running on <code>Linux</code>. So running docker containers allows us to run a standard setup OS independent and we dont need to worry about machine specifics.</p>
</div>
</div>
</div>
<div id="debugging-using-vnc" class="section level2">
<h2 class="hasAnchor">
<a href="#debugging-using-vnc" class="anchor"></a>Debugging Using VNC</h2>
<p>Often it is useful to be able to interact with the browser spawned by Selenium. In this regard the <code>Selenium</code> project provides debug versions of their images which include <code>VNC</code>. This means with a VNC viewer we can remote logon to the container and interact with the browser.</p>
<div id="remote-loggingdebugging-with-windows" class="section level3">
<h3 class="hasAnchor">
<a href="#remote-loggingdebugging-with-windows" class="anchor"></a>Remote Logging/Debugging with Windows</h3>
<p>First lets stop the running container. To stop the running container we need its ID. We then pass this id to the <a href="https://docs.docker.com/engine/reference/commandline/stop/"><code>stop</code></a> command:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> ps -q</code></pre></div>
<pre><code>ac61567a8f06</code></pre>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> stop <span class="va">$(</span><span class="ex">docker</span> ps -q<span class="va">)</span></code></pre></div>
<pre><code>ac61567a8f06</code></pre>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> ps</code></pre></div>
<pre><code>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</code></pre>
<p>So we have stopped our container and will have no issues with blocked ports. Next we need to <a href="https://docs.docker.com/engine/reference/commandline/pull/"><code>pull</code></a> the <a href="https://hub.docker.com/r/selenium/standalone-firefox-debug/"><code>Firefox standalone debug</code></a> image. Again this has various tags and we will choose the <code>2.53.0</code> one:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> pull selenium/standalone-firefox-debug:2.53.0</code></pre></div>
<pre><code>2.53.0: Pulling from selenium/standalone-firefox-debug

0be59000882d: Already exists
f20b6f990572: Already exists
53662c966c9f: Already exists
a3ed95caeb02: Already exists
0e449738cbb6: Already exists
63921592acdf: Already exists
8553f3252cbc: Already exists
dde80f7d7068: Already exists
232a7d285d74: Already exists
284e6949cb6f: Already exists
85909c621e51: Already exists
db03d98be095: Already exists
67898bba08c8: Already exists
23edc5cca893: Already exists
5ceef68785db: Already exists
8cbb6b75dad5: Already exists
d18b13cc4e51: Pull complete
4a3e92e6c855: Pull complete
1f5786a4b2ff: Download complete
3a29027ac709: Download complete
a70ecef6edbc: Download complete
10672504dfa1: Pull complete
1f5786a4b2ff: Pull complete
3a29027ac709: Pull complete
a70ecef6edbc: Pull complete
Digest: sha256:9b03c047b68b4e1c43f6d09edd952c1200766408104f76fa055e04028390491b
Status: Downloaded newer image for selenium/standalone-firefox-debug:2.53.0</code></pre>
<p>Next we start the container as before. This time we have two ports to map. The Selenium port as before and also now the VNC port. The Selenium image expose the VNC port on <code>5900</code> by default and we map this port to a port on the host. We will choose <code>5901</code> just to illustrate host v container:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> run -d -p 4445:4444 -p 5901:5900 selenium/standalone-firefox-debug:2.53.0</code></pre></div>
<pre><code>ee0c0bb8b711723e653ccc26219e314a37c28d2027f939046adcfc90a4beb645</code></pre>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker-machine</span> ip</code></pre></div>
<pre><code>192.168.99.100</code></pre>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> ps --format <span class="st">'table {{.Names}}\t{{.Image}}\t{{.ID}}'</span></code></pre></div>
<pre><code>NAMES               IMAGE                                      CONTAINER ID
focused_tesla       selenium/standalone-firefox-debug:2.53.0   ee0c0bb8b711</code></pre>
<p>Again we note that the container is ran on a virtual machine not on our Windows 10 box so we expose the ip of said virtual machine. Next we download a VNC viewer if we dont have one.</p>
<p><a href="http://www.tightvnc.com/download.php">TightVNC</a> has worked for me so I use it here.</p>
<p>Our Selenium server is running so lets use RSelenium again to browse to <code>Google</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RSelenium)
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(
  <span class="dt">remoteServerAddr =</span> <span class="st">"192.168.99.100"</span>,
  <span class="dt">port =</span> 4445L
)
remDr<span class="op">$</span><span class="kw">open</span>(<span class="dt">silent =</span> <span class="ot">TRUE</span>)
remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.google.com/ncr"</span>)
remDr<span class="op">$</span><span class="kw">getTitle</span>()
remDr<span class="op">$</span><span class="kw">screenshot</span>(<span class="dt">display =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p>Now we open <code>TightVNC</code> and use the VM ip with appropriate port for VNC:</p>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/TightVNC.png" title="Accessing Firefox debug with Tight VNC" width="100%"></p>
<p>You will be asked for a password which is <code>secret</code>. This can be seen by reading the images dockerfile:</p>
<pre><code>RUN apt-get update -qqy \
  &amp;&amp; apt-get -qqy install \
    x11vnc \
  &amp;&amp; rm -rf /var/lib/apt/lists/* \
  &amp;&amp; mkdir -p ~/.vnc \
&amp;&amp; x11vnc -storepasswd secret ~/.vnc/passwd</code></pre>
<p>Enter the password and you should have access to the container browser. Navigate to another website;</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.bbc.com"</span>)
remDr<span class="op">$</span><span class="kw">getTitle</span>()</code></pre></div>
<pre><code>## [[1]]
## [1] "BBC - Homepage"</code></pre>
<p>and you should observe the action on the containers browser. Finally stop your containers:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> stop <span class="va">$(</span><span class="ex">docker</span> ps -q<span class="va">)</span></code></pre></div>
<pre><code>ee0c0bb8b711</code></pre>
</div>
<div id="remote-loggingdebugging-with-linux" class="section level3">
<h3 class="hasAnchor">
<a href="#remote-loggingdebugging-with-linux" class="anchor"></a>Remote Logging/Debugging with Linux</h3>
<p>Firstly, we stop any running containers which may block our ports:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> stop <span class="va">$(</span><span class="ex">docker</span> ps -q<span class="va">)</span></code></pre></div>
<pre><code>5475923fc4dc</code></pre>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="ex">docker</span> ps</code></pre></div>
<pre><code>CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES</code></pre>
<p>Like in windows we <code>pull</code> the <code>2.53.0</code> version of the <code>Firefox</code> standalone debug image (again using <code>sudo</code> if necessary:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker pull selenium/standalone-firefox-debug:2.53.0</code></pre></div>
<pre><code>2.53.0: Pulling from selenium/standalone-firefox-debug

0be59000882d: Already exists 
f20b6f990572: Already exists 
53662c966c9f: Already exists 
a3ed95caeb02: Already exists 
0e449738cbb6: Already exists 
63921592acdf: Already exists 
8553f3252cbc: Already exists 
dde80f7d7068: Already exists 
232a7d285d74: Already exists 
284e6949cb6f: Already exists 
85909c621e51: Already exists 
db03d98be095: Already exists 
67898bba08c8: Already exists 
23edc5cca893: Already exists 
5ceef68785db: Already exists 
8cbb6b75dad5: Already exists 
d18b13cc4e51: Pull complete 
4a3e92e6c855: Pull complete 
10672504dfa1: Downloading 7.915 MB/16.87 MB
1f5786a4b2ff: Downloading 5.487 MB/5.528 MB
3a29027ac709: Download complete 
a70ecef6edbc: Download complete </code></pre>
<p>Once the image is downloaded we can start it as we did with Windows. We map Selenium to port 4445 on the host and VNC to port 5901. As noted before the host in the case of Ubuntu 16.04 is the machine itself so <code>localhost</code> is the relevant ip:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker run -d -p 4445:4444 -p 5901:5900 selenium/standalone-firefox-debug:2.53.0</code></pre></div>
<pre><code>dd36811562e83e66ab145efcedca2825a621741f10d8c81a5fb3fb5ba3019032</code></pre>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker ps --format <span class="st">'table {{.Names}}\t{{.Image}}\t{{.ID}}'</span></code></pre></div>
<pre><code>NAMES               IMAGE                                      CONTAINER ID
thirsty_swanson     selenium/standalone-firefox-debug:2.53.0   dd36811562e8</code></pre>
<p>So we can see that Selenium server is running. Like in Windows we need a VNC viewer. You can use <code>TightVNC</code> as with windows and a guide to running it is <a href="https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-vnc-on-ubuntu-16-04">here</a>. We will use <code>Vinagre</code> however. A guide to install <code>Vinagre</code> is <a href="https://www.howtoinstall.co/en/ubuntu/xenial/vinagre">here</a>. Basically we just need to <code>apt-get</code> it:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> apt-get update
<span class="fu">sudo</span> apt-get install vinagre</code></pre></div>
<p>Again, we navigate to Google:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(RSelenium)
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">port =</span> 4445L)
remDr<span class="op">$</span><span class="kw">open</span>(<span class="dt">silent =</span> <span class="ot">TRUE</span>)
remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.google.com/ncr"</span>)
remDr<span class="op">$</span><span class="kw">getTitle</span>()</code></pre></div>
<pre><code>## [[1]]
## [1] "Google"</code></pre>
<p>Now open Vinagre and input the correct ip/port (127.0.0.1:5901 in this case):</p>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203295/VinagreVNC.png" title="Accessing Firefox debug with Tight VNC" width="100%"></p>
<p>Again it will ask for a password which as before is <code>secret</code>.</p>
<p>You should now be able to interact with the containers browser. Again navigate to another website and observe the containers browser:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.bbc.com"</span>)
remDr<span class="op">$</span><span class="kw">getTitle</span>()</code></pre></div>
<pre><code>## [[1]]
## [1] "BBC - Homepage"</code></pre>
<p>Finally close the session:</p>
<pre><code>remDr$close()</code></pre>
<p>And close down any running containers:</p>
<div class="sourceCode"><pre class="sourceCode sh"><code class="sourceCode bash"><span class="fu">sudo</span> docker stop <span class="va">$(</span><span class="fu">sudo</span> docker ps -q<span class="va">)</span></code></pre></div>
<pre><code>dd36811562e8</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#preparing-docker-on-windows">Preparing Docker on Windows</a></li>
      <li><a href="#preparing-docker-on-linux">Preparing Docker on Linux</a></li>
      <li><a href="#using-selenium-docker-images">Using Selenium Docker Images</a></li>
      <li><a href="#debugging-using-vnc">Debugging Using VNC</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Harrison, Ju Yeong Kim.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
