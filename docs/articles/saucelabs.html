<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Driving OS/Browsers Local and Remote • RSelenium</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Driving OS/Browsers Local and Remote">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">RSelenium</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.7.4</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/basics.html">Basics</a>
    </li>
    <li>
      <a href="../articles/docker.html">Docker</a>
    </li>
    <li>
      <a href="../articles/headless.html">Headless Browsing</a>
    </li>
    <li>
      <a href="../articles/saucelabs.html">Driving OS/Browsers Local and Remote</a>
    </li>
    <li>
      <a href="../articles/shinytesting.html">Testing Shiny Apps</a>
    </li>
    <li>
      <a href="../articles/webinar.html">OCRUG Webinar</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Driving OS/Browsers Local and Remote</h1>
            
      
      
      <div class="hidden name"><code>saucelabs.Rmd</code></div>

    </div>

    
    
<div id="introduction" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction" class="anchor"></a>Introduction</h2>
<p>The goal of this vignette is to give a basic overview of how one might approach using RSelenium with combinations of operating systems (OS) and browsers both locally and remotely.</p>
</div>
<div id="rselenium-with-local-fully-fledged-browsers" class="section level2">
<h2 class="hasAnchor">
<a href="#rselenium-with-local-fully-fledged-browsers" class="anchor"></a>RSelenium with Local Fully-fledged Browsers</h2>
<div id="firefox" class="section level3">
<h3 class="hasAnchor">
<a href="#firefox" class="anchor"></a>Firefox</h3>
<p>The default browser for <code>RSelenium</code> is firefox. When a <code>remoteDriver</code> class is instantiated using default options for example <code>remdr &lt;- remoteDriver()</code> then the browser listed is firefox.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remdr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>()
remDr</code></pre></div>
<pre><code>## $remoteServerAddr
## [1] "localhost"
## 
## $port
## [1] 4444
## 
## $browserName
## [1] "firefox"
## 
## $version
## [1] ""
## 
## $platform
## [1] "ANY"
## 
## $javascript
## [1] TRUE
## 
## $autoClose
## [1] FALSE
## 
## $nativeEvents
## [1] TRUE
## 
## $extraCapabilities
## list()</code></pre>
<p>Other browsers can be driven using <code>RSelenium</code>. We shall split these browsers into three groups. Full-fledged browsers, headless browsers and mobile browsers.</p>
<p>The standalone selenium jar has the ability to drive other full-fleged browsers such as chrome, internet explorer, safari and opera. First we shall look at how to drive chrome using <code>RSelenium</code></p>
</div>
<div id="chrome" class="section level3">
<h3 class="hasAnchor">
<a href="#chrome" class="anchor"></a>Chrome</h3>
<p>Firstly we note that chrome in this instance can be considered as having three parts. There is the browser itself (“chrome”), the language bindings provided by the Selenium project (“the driver”) and an executable downloaded from the Chromium project which acts as a bridge between “chrome” and the “driver”. This executable is called “chromedriver”. We need to have a “chromedriver” running. First we need to locate one. The download directory for chromedriver is currently located at <a href="http://chromedriver.storage.googleapis.com/index.html" class="uri">http://chromedriver.storage.googleapis.com/index.html</a>. In this example we shall look at running chrome on a windows platform so we will download the windows chromedriver. The most uptodate version of chromedriver at the time of writing was 2.9. In the notes this supports chrome v31-34. We are running chrome 33 so this is fine.</p>
<pre><code>----------ChromeDriver v2.9 (2014-01-31)----------
Supports Chrome v31-34</code></pre>
<p>We download the appropriate <a href="http://chromedriver.storage.googleapis.com/2.9/chromedriver_win32.zip">file</a> for windows and extract the .exe to our Documents folder. The .exe can be placed where the user pleases but it must be in the system path. In this case we placed in the Documents folder namely C:. This directory was added to the system path.</p>
<p>We assume that a selenium server is also running if not one can be started using <code><a href="../reference/startServer.html">RSelenium::startServer()</a></code>. Now we are done. A chrome browser can be controlled as follows:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
<span class="co"># RSelenium::startServer() # if needed</span>
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">browserName =</span> <span class="st">"chrome"</span>)
remDr<span class="op">$</span><span class="kw">open</span>()

<span class="kw">head</span>(remDr<span class="op">$</span>sessionInfo)</code></pre></div>
<pre><code>## $platform
## [1] "WIN8"
## 
## $acceptSslCerts
## [1] TRUE
## 
## $javascriptEnabled
## [1] TRUE
## 
## $browserName
## [1] "chrome"
## 
## $chrome
## $chrome$userDataDir
## [1] "C:\\Users\\john\\AppData\\Local\\Temp\\scoped_dir24584_12002"
## 
## 
## $rotatable
## [1] FALSE</code></pre>
</div>
<div id="internet-explorer" class="section level3">
<h3 class="hasAnchor">
<a href="#internet-explorer" class="anchor"></a>Internet Explorer</h3>
<p>Similarly to the chrome browser you do not need to run an installer before using the InternetExplorerDriver, though some configuration is required. The standalone server executable must be downloaded from the Downloads page and placed in your PATH. Again we need to download this executable and place it in our path. At the time of writing the internet explorer .exe is included with the main standalone server <a href="http://selenium-release.storage.googleapis.com/index.html">here</a>. The current release is 2.40. The system I am running is 64 bit so we download the <a href="http://selenium-release.storage.googleapis.com/2.40/IEDriverServer_x64_2.40.0.zip">64bit version</a>. For simplicity we again place this in our Documents directory namely C:. This directory is already in the system path from running the chrome example. If you want to place the internet explorer .exe in another folder add this folder to your system path. To control internet explorer as a browser is now as simple as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
<span class="co"># RSelenium::startServer() # if needed</span>
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">browserName =</span> <span class="st">"internet explorer"</span>)
remDr<span class="op">$</span><span class="kw">open</span>()

<span class="kw">head</span>(remDr<span class="op">$</span>sessionInfo, <span class="dv">7</span>)</code></pre></div>
<pre><code>## $platform
## [1] "WINDOWS"
## 
## $javascriptEnabled
## [1] TRUE
## 
## $elementScrollBehavior
## [1] 0
## 
## $ignoreZoomSetting
## [1] FALSE
## 
## $enablePersistentHover
## [1] TRUE
## 
## $ie.ensureCleanSession
## [1] FALSE
## 
## $browserName
## [1] "internet explorer"</code></pre>
</div>
<div id="safari" class="section level3">
<h3 class="hasAnchor">
<a href="#safari" class="anchor"></a>Safari</h3>
<p>Currently Apple have discontinued developement of safari for windows. The latest version for windows was 5.1.7 available <a href="http://filehippo.com/download_safari/">here</a>. Starting with Selenium 2.30.0, the SafariDriver comes bundled with the Selenium server so nothing other then having safari installed should be required. For the purposes of this vignette I downloaded and installed safari 5.1.7 on a windows 8.1 system. Once installed controlling safari was as easy as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
<span class="co"># RSelenium::startServer() # if needed</span>
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">browserName =</span> <span class="st">"safari"</span>)
remDr<span class="op">$</span><span class="kw">open</span>()
<span class="kw">head</span>(remDr<span class="op">$</span>sessionInfo)</code></pre></div>
<pre><code>## $platform
## [1] "WINDOWS"
## 
## $cssSelectorsEnabled
## [1] TRUE
## 
## $javascriptEnabled
## [1] TRUE
## 
## $secureSsl
## [1] TRUE
## 
## $browserName
## [1] "safari"
## 
## $webdriver.remote.sessionid
## [1] "a18da818-5160-47c4-8e88-7e95605c5cab"</code></pre>
</div>
<div id="opera" class="section level3">
<h3 class="hasAnchor">
<a href="#opera" class="anchor"></a>Opera</h3>
<p>Opera is currently not supported for versions newer then 12. <a href="http://code.google.com/p/selenium/wiki/OperaDriver" class="uri">http://code.google.com/p/selenium/wiki/OperaDriver</a> gives details on the current status. For the purposes of this vignette I downloaded and installed the 64 bit version of 12.16 located <a href="http://www.opera.com/download/guide/?os=windows&amp;ver=12.16&amp;local=y">here</a>. I had some issues getting this to run YMMV however. The first issue was getting the following error message</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
<span class="co"># RSelenium::startServer() # if needed</span>
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">browserName =</span> <span class="st">"opera"</span>)
remDr<span class="op">$</span><span class="kw">open</span>()

<span class="kw">cat</span>(remDr<span class="op">$</span>value<span class="op">$</span>message)</code></pre></div>
<pre><code>## Could not find a platform that supports bundled launchers, please set it manually
## Build info: version: '2.40.0', revision: 'fbe29a9', time: '2014-02-19 20:54:28'
## System info: host: 'johnlt', ip: '192.168.58.1', os.name: 'Windows 8', os.arch: 'amd64', os.version: '6.2', java.version: '1.7.0_45'
## Driver info: driver.version: OperaDriver</code></pre>
<p>So not surprising win 8.1 was first unveiled and released as a public beta in June 2013 and on July 4, 2013, Opera 12.16 was released being the last current version of opera supported by selenium. OperaLauncherRunner.java located <a href="https://github.com/operasoftware/operadriver/blob/master/src/com/opera/core/systems/runner/launcher/OperaLauncherRunner.java">here</a> does not currently cater for the WIN8 enum returned by Platform.getCurrent().</p>
<p>The solution is to start the selenium server with additional parameters passed to java (RSelenium::startServer doesnt pass arguments to java atm)</p>
<pre class="batch"><code>java -Dos.name=windows -jar selenium-server-standalone.jar</code></pre>
<p>This is actually using <code>java -D</code> which is used to set a system property. The system property we set is <code>os.name</code>. This is nothing to do with selenium-server and the appearance of <code>Dos</code> is a coincidence not related to DOS.</p>
<p>Now we get a new issue.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
<span class="co"># RSelenium::startServer() # if needed</span>
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">browserName =</span> <span class="st">"opera"</span>)
remDr<span class="op">$</span><span class="kw">open</span>()

remDr<span class="op">$</span>value<span class="op">$</span>message</code></pre></div>
<pre><code>## [1] "Unable to find executable for product Opera Desktop"</code></pre>
<p>So in this case we refer to the operadriver <a href="http://code.google.com/p/selenium/wiki/OperaDriver">wiki</a>. It states that the OperaDriver server expects you to have Opera or Opera Next installed in the default location for each system which for windows is %PROGRAMFILES%.exe or more precisely C:Files.exe. As I have installed the 64bit version I need to tell opera driver where to look</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
<span class="co"># RSelenium::startServer() # if needed</span>
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(
  <span class="dt">browserName =</span> <span class="st">"opera"</span>,
  <span class="dt">extraCapabilities =</span> <span class="kw">list</span>(<span class="st">"opera.binary"</span> =<span class="st"> "C:</span><span class="ch">\\</span><span class="st">Program Files</span><span class="ch">\\</span><span class="st">Opera x64</span><span class="ch">\\</span><span class="st">opera.exe"</span>)
)
remDr<span class="op">$</span><span class="kw">open</span>()

<span class="kw">head</span>(remDr<span class="op">$</span>sessionInfo)</code></pre></div>
<pre><code>## $platform
## [1] "ANY"
## 
## $opera.binary
## [1] "C:\\Program Files\\Opera x64\\opera.exe"
## 
## $javascriptEnabled
## [1] TRUE
## 
## $opera.host
## [1] "127.0.0.1"
## 
## $browserName
## [1] "opera"
## 
## $opera.idle
## [1] FALSE</code></pre>
<p>A few small issues. I suspect if you were running win 7 or lower and the 32 bit version of opera 12.16 it would probably run out of the box.</p>
</div>
</div>
<div id="rselenium-with-local-headless-browsers" class="section level2">
<h2 class="hasAnchor">
<a href="#rselenium-with-local-headless-browsers" class="anchor"></a>RSelenium with Local Headless Browsers</h2>
<p>Next we shall look at running what is known as headless browsers. Usually a browser can do three things</p>
<ol style="list-style-type: decimal">
<li>For given url, download the html page (or any other content apart from html)</li>
<li>Render the content into dom, eg executing javascript inside the script tag. and the executed result will be reflected on the browsers dom.</li>
<li>Render the dom into visualised content.</li>
</ol>
<p>A headless browser handles items 1 and 2 but doesnt carryout 3. This means it doesnt display anything. All pages etc. are in memory rather then displayed to the user. The result of this is that headless browsers should perform faster then their full-fledged competitors which could be welcome news to speed up testing.</p>
<div id="phantomjs" class="section level3">
<h3 class="hasAnchor">
<a href="#phantomjs" class="anchor"></a>phantomjs</h3>
<p>The first headless browser we shall look at is <code>phantomjs</code>. Firstly download the relevant zip file for your OS from <a href="http://phantomjs.org/download.html">here</a>. We are using windows so we downloaded <a href="https://bitbucket.org/ariya/phantomjs/downloads/phantomjs-2.1.1-windows.zip">phantomjs-2.1.1-windows.zip</a>. It is sufficient to place the location of the directory containing <code>phantomjs.exe</code> in your path. In this case we probably could have just extracted <code>phantomjs.exe</code> to the Documents folder where chromedriver etc current reside.</p>
<p>However I extracted it to the desktop keeping the contents of the zip. The reasoning behind this was that phantomjs is driven by selenium using <a href="https://github.com/detro/ghostdriver">ghostdriver</a>. At some point the version of ghostdriver phantomjs uses will be upgraded and will accept calls from an unexposed method <code>phantomExecute</code> of the RSelenium <code>remoteDriver</code> class. There are interesting scripts contained in the phantomjs /example directory like netsniff.js which captures network traffic in HAR format. When the <code>phantomExecute</code> method is exposed these scripts will be useful. So I added the location of the .exe to my path namely the directory C:-1.9.7-windows. Once your operating system can find <code>phantomjs.exe</code> or the equivalent driving a phantomjs browser is as easy as:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
<span class="co"># RSelenium::startServer() # if needed</span>
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">browserName =</span> <span class="st">"phantomjs"</span>)
remDr<span class="op">$</span><span class="kw">open</span>()

<span class="kw">head</span>(remDr<span class="op">$</span>sessionInfo)</code></pre></div>
<pre><code>## $platform
## [1] "XP"
## 
## $acceptSslCerts
## [1] FALSE
## 
## $javascriptEnabled
## [1] TRUE
## 
## $browserName
## [1] "phantomjs"
## 
## $rotatable
## [1] FALSE
## 
## $driverVersion
## [1] "1.1.0"</code></pre>
<p>We can take a screenshot even thou the browser is headless:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.google.com/ncr"</span>)
remDr<span class="op">$</span><span class="kw">screenshot</span>(<span class="dt">display =</span> <span class="ot">TRUE</span>)</code></pre></div>
<h6 align="center">
RSelenium on win 8.1 driving phantomjs
</h6>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/tmpScreenShot.png" title="RSelenium on win 8.1 driving phantomjs" style="margin-left: auto;margin-right: auto; display: block;" width="100%"></p>
<p>PhantomJS is excellent. It has only recently as of version 1.8 had Ghost Driver integration and hopefully its importance will increase further.</p>
</div>
<div id="htmlunit" class="section level3">
<h3 class="hasAnchor">
<a href="#htmlunit" class="anchor"></a>HtmlUnit</h3>
<p>The original headless browser for selenium was <code>htmlunit</code>.</p>
</div>
</div>
<div id="rselenium-with-local-mobile-browsers" class="section level2">
<h2 class="hasAnchor">
<a href="#rselenium-with-local-mobile-browsers" class="anchor"></a>RSelenium with Local Mobile Browsers</h2>
<p>Configuring your local machine to use mobile browsers can be slightly tricky. If you are having difficulty setting up on your particular OS you may want to skip this section.</p>
<div id="android" class="section level3">
<h3 class="hasAnchor">
<a href="#android" class="anchor"></a>Android</h3>
<p>The first mobile browser we will look at driving is Android. The selenium project had android drivers in the selenium project. The current state of these drivers is listed <a href="http://code.google.com/p/selenium/wiki/AndroidDriver#REMOVED_FROM_THE_PROJECT">here</a>.</p>
<p>As can be noted driving android using the selenium server has been deprecated in favour of the <a href="http://selendroid.io/mobileWeb.html">selendroid project</a>. Once selendroid has been setup this means that rather than running the selenium standalone jar as a server we will be running an equivalent selendroid jar to drive our browser on our real or emulated android phone. More on this later for now we will look at setting selendroid up.</p>
<div id="setting-up-selendroid" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-up-selendroid" class="anchor"></a>Setting up Selendroid</h4>
<p>The selendroid project has a page on <a href="http://appium.io/docs/en/about-appium/getting-started/">getting started</a>.</p>
<div id="jdk" class="section level5">
<h5 class="hasAnchor">
<a href="#jdk" class="anchor"></a>JDK</h5>
<p>There are a couple of things to note <strong>Java SDK (minimum 1.6) must be installed</strong>. Most likely JRE is installed on your system. To check look for the directory C:Files1.7.0_51 or something similar. You can also check the version of java and it should indicate <code>Java(TM) SE Runtime Environment</code>.</p>
<pre class="batch"><code>java -version</code></pre>
<pre><code>java version "1.7.0_51"
Java(TM) SE Runtime Environment (build 1.7.0_51-b13)
Java HotSpot(TM) 64-Bit Server VM (build 24.51-b03, mixed mode)</code></pre>
<p>If you need the JDK you can install from <a href="http://www.oracle.com/technetwork/java/javase/downloads/java-se-jre-7-download-432155.html">here</a>. Once the JDK is installed the environment variable JAVA_HOME should be set.</p>
<pre class="batch"><code>echo %JAVA_HOME%</code></pre>
<pre><code>C:\Program Files\Java\jdk1.7.0_51</code></pre>
</div>
<div id="sdk" class="section level5">
<h5 class="hasAnchor">
<a href="#sdk" class="anchor"></a>SDK</h5>
<p>Another Developement kit needs to be installed <a href="http://developer.android.com/sdk/index.html">SDK</a> in this case. From the link provided you can download the ADT Bundle for Windows. I downloaded the bundle and extracted the zip to the Desktop this resulted in a directory <code>C:\Users\john\Desktop\adt-bundle-windows-x86_64-20131030</code>. There is a guide to setup the SDK <a href="http://projects.spring.io/spring-android/#quick-start">here</a>. The environment variable <code>ANDROID_HOME</code> needs to be set. This should be set to the /sdk/ directory in the extracted bundle.</p>
<pre class="batch"><code>echo %ANDROID_HOME%</code></pre>
<pre><code>C:\Users\john\Desktop\adt-bundle-windows-x86_64-20131030\sdk</code></pre>
<p>After setting <code>ANDROID_HOME</code> <code>%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools</code> needs to be added to the system path also. Typing android in a command prompt should bring up the following:</p>
<h6 align="center">
Android SDK on win 8.1
</h6>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/androidsdk.png" title="Android SDK on win 8.1" style="margin-left: auto;margin-right: auto; display: block;" width="100%"></p>
<p>From the tools make sure all are installed. From the latest android release Android 4.4.2 (API 19) in this case make sure all are installed. From the Extras folder, select the checkbox for the Android Support Library and make sure it is installed. You will also want to install the Intel Hardware Accelerated Execution Manager. Instructions on how to do so are <a href="http://software.intel.com/en-us/android/articles/installation-instructions-for-intel-hardware-accelerated-execution-manager-windows">here</a>. Basically checking the box Intel x86 Emulator Accelerator (HAXM) and “installing” will download it to <code>%ANDROID_HOME%/extras/intel</code>. In this folder is an exe <code>IntelHaxm.exe</code> which should be ran to finish the install.</p>
</div>
<div id="creating-an-android-virtual-device" class="section level5">
<h5 class="hasAnchor">
<a href="#creating-an-android-virtual-device" class="anchor"></a>Creating an Android Virtual Device</h5>
<p>Next we need to emulate a phone. The alternative is to use a hardware phone running the Android OS. Refer to <a href="http://selendroid.io/setup.html#androidDevices">here</a> if you are running a hardware phone but it should be as simple as connecting it to the machine running selendroid via usb. We shall instead create an Android Virtual Device (Avd). The easiest way to do this is by typing <code>android avd</code> into a command console.</p>
<h6 align="center">
Android AVD on win 8.1
</h6>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/androidavd.png" title="Android AVD on win 8.1" style="margin-left: auto;margin-right: auto; display: block;" width="100%"></p>
<p>You can see I have created an avd already named “my_avd”. You will need to create one by clicking new. The details for the “my_avd” are shown here</p>
<h6 align="center">
Android AVD my_avd on win 8.1
</h6>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/androidmy_avd.png" title="Android AVD my_avd on win 8.1" style="margin-left: auto;margin-right: auto; display: block;" width="100%"></p>
<p>Click ok and an avd should have been created. You can start it using the panel. Click the newly created avd then click start. It will take a few moments but a panel containing a virtual phone will hopefully boot up and eventually get to the phone screen.</p>
<h6 align="center">
Android AVD my_avd on win 8.1
</h6>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/androidrunavd.png" title="Android AVD my_avd on win 8.1" style="margin-left: auto;margin-right: auto; display: block;" width="100%"></p>
<p>If you have got to this point it is most likely you will now be able to drive this phone with selendroid. Take a few moments to play with your virtual android phone ;).</p>
</div>
<div id="selendroid" class="section level5">
<h5 class="hasAnchor">
<a href="#selendroid" class="anchor"></a>Selendroid</h5>
<p>Finally, we need to download the selendroid driver. The selendroid <a href="http://selendroid.io/">homepage</a> has a link at the bootom to the most recent <a href="https://github.com/selendroid/selendroid/releases/download/0.8.0/selendroid-standalone-0.8.0-with-dependencies.jar">jar</a>. This jar should be saved on the local computer. I saved the jar in the Documents folder namely <code>C:\Users\john\Documents</code>. To begin running tests you need to run the jar with java in a command prompt.</p>
<pre class="batch"><code>java -jar selendroid-standalone-0.8.0-with-dependencies.jar</code></pre>
</div>
<div id="rselenium-and-selendroid" class="section level5">
<h5 class="hasAnchor">
<a href="#rselenium-and-selendroid" class="anchor"></a>RSelenium and Selendroid</h5>
<p>Finally we are ready to use <code>RSelenium</code> to control an android browser.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
remDr &lt;-<span class="st"> </span><span class="kw"><a href="../reference/remoteDriver-class.html">remoteDriver</a></span>(<span class="dt">browserName =</span> <span class="st">"android"</span>)
remDr<span class="op">$</span><span class="kw">open</span>()
remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.google.com/ncr"</span>)</code></pre></div>
<h6 align="center">
Android with RSelenium on win 8.1
</h6>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/androidRSelenium.png" title="Android with RSelenium on win 8.1" style="margin-left: auto;margin-right: auto; display: block;" width="100%"></p>
</div>
</div>
</div>
<div id="ios" class="section level3">
<h3 class="hasAnchor">
<a href="#ios" class="anchor"></a>iOS</h3>
<p>Testing iOS requires a Mac. The setup is similar to selendroid. <a href="http://appium.io/docs/en/about-appium/getting-started/?lang=en">Appium</a> and <a href="http://ios-driver.github.io/ios-driver/?page=setup">ios-driver</a> can be used. An SDK is required namely iPhone simulator SDK and a virtual phone is ran in a similar fashion to Selendroid.</p>
</div>
</div>
<div id="rselenium-with-remote-browsers-and-external-sites" class="section level2">
<h2 class="hasAnchor">
<a href="#rselenium-with-remote-browsers-and-external-sites" class="anchor"></a>RSelenium with Remote Browsers and External Sites</h2>
<p>Setting up multiple OS/browsers combinations locally is not always the best use of ones time. It is an interesting exercise to implement for example an Android platform locally but the overhead of having multiple systems and browsers quickly overcomes the utility. There are professional service providers who maintain a suite of OS/browsers that can be utilised for testing. Companies such as <a href="Sauce%20Labs">https://saucelabs.com/</a> and <a href="Browser%20Stack">http://www.browserstack.com</a> offer free automated testing to open source projects. In this vignette we will demonstrate remote testing using Sauce Labs.</p>
<div id="setting-up-sauce-labs" class="section level3">
<h3 class="hasAnchor">
<a href="#setting-up-sauce-labs" class="anchor"></a>Setting up Sauce Labs</h3>
<p>We assume in this vignette that you are setting up Sauce Labs for an open source project. Firstly you should register your project <a href="https://saucelabs.com/opensauce">here</a>. On the <a href="https://saucelabs.com/account">account page</a> you will find the access key for your account that is in a similar format to <code>49953c74-5c46-4ff9-b584-cf31a4c71809</code>. Using Sauce Labs is pretty straightforward. You need to tell it what OS/Browser combination you would like. A list of possible setups can be viewed <a href="https://saucelabs.com/platforms">here</a>. As an example lets suppose we wished to run google chrome version 33 on OSX version mavericks.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
user &lt;-<span class="st"> "rselenium0"</span> <span class="co"># Your Sauce Labs username</span>
pass &lt;-<span class="st"> "49953c74-5c46-4ff9-b584-cf31a4c71809"</span> <span class="co"># Your Sauce Labs access key </span>
port &lt;-<span class="st"> </span><span class="dv">80</span>
ip &lt;-<span class="st"> </span><span class="kw">paste0</span>(user, <span class="st">':'</span>, pass, <span class="st">"@ondemand.saucelabs.com"</span>)
rdBrowser &lt;-<span class="st"> "chrome"</span>
version &lt;-<span class="st"> "33"</span>
platform &lt;-<span class="st"> "OS X 10.9"</span>
extraCapabilities &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="dt">name =</span> <span class="st">"RSelenium OS/Browsers vignette first example"</span>,
  <span class="dt">username =</span> user,
  <span class="dt">accessKey =</span> pass,
  <span class="dt">tags =</span> <span class="kw">list</span>(<span class="st">"RSelenium-vignette"</span>, <span class="st">"OS/Browsers-vignette"</span>)
)
remDr &lt;-<span class="st"> </span>remoteDriver<span class="op">$</span><span class="kw">new</span>(
  <span class="dt">remoteServerAddr =</span> ip,
  <span class="dt">port =</span> port,
  <span class="dt">browserName =</span> rdBrowser,
  <span class="dt">version =</span> version,
  <span class="dt">platform =</span> platform,
  <span class="dt">extraCapabilities =</span> extraCapabilities
)</code></pre></div>
<p>We state the browser and OS we require (chrome 33/ Mac OSX 10.9). The user and password are used to form an appropriate ip address for our remote server (<a href="http://rselenium0:49953c74-5c46-4ff9-b584-cf31a4c71809@ondemand.saucelabs.com" class="uri">http://rselenium0:49953c74-5c46-4ff9-b584-cf31a4c71809@ondemand.saucelabs.com</a> in this case). They are also passed as <code>extraCapabilities</code> to the remote Selenium server.</p>
<p>We give our test a <code>name</code> and any additional <code>tags</code> we wish that are passed to the remote Selenium server. Details of the name and tags are given <a href="https://saucelabs.com/docs/additional-config">here</a>. They are used to annotate our tests.</p>
<div id="basic-example" class="section level4">
<h4 class="hasAnchor">
<a href="#basic-example" class="anchor"></a>Basic Example</h4>
<p>As a basic first example we will run a script using the mavericks/ chrome 33 combination. We run the following commands:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">testScript &lt;-<span class="st"> </span><span class="cf">function</span>(remDr){
  remDr<span class="op">$</span><span class="kw">open</span>()
  remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.google.com/ncr"</span>)
  <span class="kw">Sys.sleep</span>(<span class="dv">2</span>)
  <span class="co"># highlight the query box</span>
  remDr<span class="op">$</span><span class="kw">findElement</span>(<span class="st">"name"</span>, <span class="st">"q"</span>)<span class="op">$</span><span class="kw">highlightElement</span>()
  <span class="kw">Sys.sleep</span>(<span class="dv">2</span>)
  <span class="co"># goto rproject</span>
  remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://www.r-project.org"</span>)
  <span class="co"># go Back</span>
  remDr<span class="op">$</span><span class="kw">goBack</span>()
  <span class="co"># go Forward</span>
  remDr<span class="op">$</span><span class="kw">goForward</span>()
  <span class="kw">Sys.sleep</span>(<span class="dv">2</span>)
  webElems &lt;-<span class="st"> </span>remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="st">"css selector"</span>, <span class="st">"frame"</span>)
  <span class="co"># highlight the frames</span>
  <span class="kw">lapply</span>(webElems, <span class="cf">function</span>(x){x<span class="op">$</span><span class="kw">highlightElement</span>()})
  
  remDr<span class="op">$</span><span class="kw">close</span>()
}

<span class="kw">testScript</span>(remDr)</code></pre></div>
<p>And thats it. We have ran our first remote test using Sauce Labs. The results of the test can be viewed <a href="https://saucelabs.com/tests/ae22f859de8746f9bfedad2f49c1c329" class="uri">https://saucelabs.com/tests/ae22f859de8746f9bfedad2f49c1c329</a>. I think you will agree its a nice setup. We have access to screenshots of all the commands we issued and a video (screencast) of the test run. We can view the selenium server logs and the medadata associated with our test.</p>
</div>
</div>
<div id="testing-multiple-osbrowsers" class="section level3">
<h3 class="hasAnchor">
<a href="#testing-multiple-osbrowsers" class="anchor"></a>Testing Multiple OS/Browsers</h3>
<p>We can easily extend the simple test we ran for multiple OS/Browser combinations. The browser and platform variables need to be assigned the combinations we require.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">osBrowser &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="st">"OS X 10.9"</span> =<span class="st"> </span><span class="kw">list</span>(
    <span class="dt">browser =</span> <span class="kw">list</span>(<span class="st">"safari"</span>, <span class="st">"firefox"</span>),
    <span class="dt">version =</span> <span class="kw">list</span>(<span class="st">'7'</span>, <span class="st">'28'</span>)
  ),
  <span class="st">"Windows 8"</span> =<span class="st"> </span><span class="kw">list</span>(
    <span class="dt">browser =</span> <span class="kw">list</span>(<span class="st">"chrome"</span>, <span class="st">"firefox"</span>, <span class="st">"internet explorer"</span>),
    <span class="dt">version =</span> <span class="kw">list</span>(<span class="st">'33'</span>, <span class="st">'28'</span>, <span class="st">'10'</span>)
  ),
  <span class="st">"Linux"</span> =<span class="st"> </span><span class="kw">list</span>(
    <span class="dt">browser =</span> <span class="kw">list</span>(<span class="st">"chrome"</span>, <span class="st">"firefox"</span>, <span class="st">"opera"</span>),
    <span class="dt">version =</span> <span class="kw">list</span>(<span class="st">'33'</span>, <span class="st">'28'</span>, <span class="st">'12'</span>)
  )
)
<span class="kw">lapply</span>(<span class="kw">seq_along</span>(osBrowser), <span class="cf">function</span>(x) {
  platform &lt;-<span class="st"> </span><span class="kw">names</span>(osBrowser)[x]
  <span class="kw">lapply</span>(<span class="kw">seq_along</span>(osBrowser[[x]]<span class="op">$</span>browser), <span class="cf">function</span>(y){
    rdBrowser &lt;-<span class="st"> </span>osBrowser[[x]]<span class="op">$</span>browser[[y]]
    version &lt;-<span class="st"> </span>osBrowser[[x]]<span class="op">$</span>version[[y]]
    remDr &lt;-<span class="st"> </span>remoteDriver<span class="op">$</span><span class="kw">new</span>(
      <span class="dt">remoteServerAddr =</span> ip,
      <span class="dt">port =</span> port,
      <span class="dt">browserName =</span> rdBrowser,
      <span class="dt">version =</span> version,
      <span class="dt">platform =</span> platform,
      <span class="dt">extraCapabilities =</span> extraCapabilities
    )
    <span class="kw">testScript</span>(remDr)
  })
})</code></pre></div>
<p>To view the results you can goto the <code>RSelenium</code> project page on Sauce Labs <a href="https://saucelabs.com/u/rselenium" class="uri">https://saucelabs.com/u/rselenium</a>. Listed here are all the tests ran on the <code>RSelenium</code> package. A partial search by name <code>Browsers vignette first example</code> will give the results of this test. There are a few repeats of the first Mavericks/ chrome 33 test where I tuned the script.</p>
<h6 align="center">
Sauce Labs results for simple test script
</h6>
<p><img src="https://res.cloudinary.com/rselenium/image/upload/v1537203294/saucelabsOSBrowsers.png" title="Sauce Labs results for simple test script" style="margin-left: auto;margin-right: auto; display: block;" width="100%"></p>
</div>
</div>
<div id="rselenium-with-remote-browsers-and-local-sites" class="section level2">
<h2 class="hasAnchor">
<a href="#rselenium-with-remote-browsers-and-local-sites" class="anchor"></a>RSelenium with Remote Browsers and Local Sites</h2>
<p>Testing external webpages and websites across a range of operating systems and browsers can be achieved using Sauce Labs as we observed in the last section. Often however especially in a developement phase of a project we either do not have or do not want an external version of our webpage/website/webapp. A good example would be our <code>shinytestapp</code>. Lets open a new R session and run our testapp.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(shiny)
<span class="kw"><a href="http://www.rdocumentation.org/packages/shiny/topics/runApp">runApp</a></span>(<span class="kw">file.path</span>(<span class="kw">find.package</span>(<span class="st">"RSelenium"</span>), <span class="st">"apps"</span>, <span class="st">"shinytestapp"</span>), <span class="dt">port =</span> <span class="dv">3000</span>)</code></pre></div>
<p>To access our app we would require the ip address <code>http://localhost:3000/</code>. How do we access this from a remote webdriver?</p>
<div id="sauce-connect" class="section level3">
<h3 class="hasAnchor">
<a href="#sauce-connect" class="anchor"></a>Sauce Connect</h3>
<p>Thankfully Sauce Labs have a solution for this known as <a href="https://saucelabs.com/docs/connect">Sauce Connect</a>. Sauce Connect is a secure tunneling app which allows you to execute tests securely when testing behind firewalls via a secure connection between Sauce Labs client cloud and your environment. This allows you to drive an external Browser and have it interact with a local webpage/website/webapp.</p>
<div id="setting-up-sauce-connect" class="section level4">
<h4 class="hasAnchor">
<a href="#setting-up-sauce-connect" class="anchor"></a>Setting up Sauce Connect</h4>
<p>Firstly you need to download the Sauce Connect zip for the operating system you are using to run your tests on. This machine I will be testing from is running windows 8.1 so I download the <a href="https://saucelabs.com/downloads/sc-4.0-latest-win32.zip">windows</a> zip. I unzipped Sauce Connect to the Documents folder so it is now accessible at <code>C:\Users\john\Documents\sc-4.1-win32</code>. From a windows command prompt we navigate to the Sauce Connect bin directory and run the .exe file supplying our Sauce Labs user name and access key.</p>
<pre class="batch"><code>sc.exe -u rselenium0 -k 49953c74-5c46-4</code></pre>
<pre><code>ff9-b584-cf31a4c71809</code></pre>
</div>
</div>
<div id="basic-example-1" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-example-1" class="anchor"></a>Basic Example</h3>
<p>We opened our shinytestapp on port 3000 because Sauce Connect only supports a set number of ports. All ports can be used but for this you need a locally-defined domain name (which can be set in your hosts file) rather than localhost. This is simple to do but for the purposes of this vignette we shall connect to <code>http://localhost:3000</code>. Again to start with we shall use Mavericks with Chrome 33.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">require</span>(RSelenium)
user &lt;-<span class="st"> "rselenium0"</span> <span class="co"># Your Sauce Labs username</span>
pass &lt;-<span class="st"> "49953c74-5c46-4ff9-b584-cf31a4c71809"</span> <span class="co"># Your Sauce Labs access key </span></code></pre></div>
<p><del>port &lt;- 80</del><br><del>ip &lt;- paste0(user, ‘:’, pass, “<span class="citation">@ondemand.saucelabs.com</span>”)</del></p>
<pre><code>port &lt;- 4445
ip &lt;- paste0(user, ':', pass, "@localhost")
rdBrowser &lt;- "firefox"
version &lt;- "26"
platform &lt;- "Linux"
extraCapabilities &lt;- list(
  name = "RSelenium OS/Browsers vignette second example",
  username = user,
  accessKey = pass,
  tags = list(
    "RSelenium-vignette",
    "OS/Browsers-vignette",
    "Example 2"
  )
)
remDr &lt;- remoteDriver$new(
  remoteServerAddr = ip,
  port = port,
  browserName = rdBrowser,
  version = version,
  platform = platform,
  extraCapabilities = extraCapabilities
)</code></pre>
<p>Everything is as before the exeception is that when we ask to browse to a localhost address Sauce Connect will intervene. Also we connect to Sauce Labs through Sauce Connect on <code>localhost:4445</code> by default instead of <code>ondemand.saucelabs.com:80</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">localScript &lt;-<span class="st"> </span><span class="cf">function</span>(remDr){
  remDr<span class="op">$</span><span class="kw">open</span>()
  remDr<span class="op">$</span><span class="kw">setImplicitWaitTimeout</span>(<span class="dv">2000</span>) <span class="co"># wait for elements for 2 seconds</span>
  remDr<span class="op">$</span><span class="kw">navigate</span>(<span class="st">"http://localhost:3000"</span>)
  <span class="kw">Sys.sleep</span>(<span class="dv">2</span>)
  <span class="co"># highlight the labels</span>
  webElems &lt;-<span class="st"> </span>remDr<span class="op">$</span><span class="kw">findElements</span>(<span class="st">"css selector"</span>, <span class="st">"#ctrlSelect span"</span>)
  <span class="kw">lapply</span>(webElems, <span class="cf">function</span>(x) {x<span class="op">$</span><span class="kw">highlightElement</span>()})
  <span class="kw">Sys.sleep</span>(<span class="dv">2</span>)
  appIds &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"summary"</span>, <span class="st">"distPlot"</span>, <span class="st">"ggPlot"</span>, <span class="st">"dttable"</span>)
  <span class="co"># Click each checkbox and check for its output</span>
  <span class="kw">lapply</span>(<span class="kw">seq_along</span>(webElems), <span class="cf">function</span>(x) {
    <span class="cf">if</span>(<span class="op">!</span>webElems[[x]]<span class="op">$</span><span class="kw">isElementSelected</span>()[[<span class="dv">1</span>]]) {
      webElems[[x]]<span class="op">$</span><span class="kw">clickElement</span>()
      <span class="co"># test for its output</span>
      out &lt;-<span class="st"> </span>remDr<span class="op">$</span><span class="kw">findElement</span>(<span class="st">"id"</span>, appIds[x])
      out<span class="op">$</span><span class="kw">highlightElement</span>()
    }
  })
  
  remDr<span class="op">$</span><span class="kw">close</span>()
}

<span class="kw">localScript</span>(remDr)</code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction">Introduction</a></li>
      <li><a href="#rselenium-with-local-fully-fledged-browsers">RSelenium with Local Fully-fledged Browsers</a></li>
      <li><a href="#rselenium-with-local-headless-browsers">RSelenium with Local Headless Browsers</a></li>
      <li><a href="#rselenium-with-local-mobile-browsers">RSelenium with Local Mobile Browsers</a></li>
      <li><a href="#rselenium-with-remote-browsers-and-external-sites">RSelenium with Remote Browsers and External Sites</a></li>
      <li><a href="#rselenium-with-remote-browsers-and-local-sites">RSelenium with Remote Browsers and Local Sites</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by John Harrison, Ju Yeong Kim.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
